<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href=" ../asset/css/pagedeconnexion.css">
    <title>creeradmin</title>
  </head>
  <body>
    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 

  <div class="container" >
  <ul id="form-messages"></ul>

  <div class="mx-auto text_center " style="color:white,width:55%;height:620px">
  <img src="../asset/img/logo-QuizzSA.png"  style="width:35px"class="">
  <div class="container" style="background: rgba(124, 58, 58, 0.46);" >
  <nav class="navbar navbar-expand-lg" style="margin-top:-100px;margin-left:100px;">
  <div id="btn-submit" class="btn btn-primary  "style="margin:50px; margin-top:60px;background:   linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), #7C3A3A;width: 130px;
height: 52px;
" ><a class="navbar-brand" href="listequestions.php" style="color: #000000;font-family: Rasa;  ">Listquestion</a></div>
<div id="btn-submit" class="btn btn-primary"style=" margin:50px;margin-top:60px;background:   linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), #7C3A3A;width: 130px;
height: 52px;
" ><a class="navbar-brand" href="creeradmin.php" style="color: #000000;font-family: Rasa; ">Creer admin</a></div>
<div id="btn-submit" class="btn btn-primary"style="margin:50px; margin-top:60px;background:   linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), #7C3A3A;width: 130px;
height: 52px;
" ><a class="navbar-brand" href="listejoueurs.php" style="color: #000000;font-family: Rasa; ">Liste joueur</a></div>
<div id="btn-submit" class="btn btn-primary"style="margin:50px; margin-top:60px;background:   linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), #7C3A3A;width: 130px;
height: 52px;
" ><a class="navbar-brand" style="color: #000000;font-family: Rasa; " href=creerquestions.php>Creequestions</a></div>
  
  </nav>
  <div class="container col-md-10 mr-2" id='mareme'style="
background: rgba(124, 58, 58, 0.49); margin-top:-35px; height:500px">

<div class="form-control"style="
background: linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), #7C3A3A; width:100% ;magin-top=-90px; height:50px ;"  ><div class="inscription"> liste questions</div></div>
  
  
  </form>
  
  <div id='scrollZone'style='height:200px'class="overflow-auto col-md-6 mx-auto ">
  Lorem ipsum dolor sit amet consectetur adipisicing elit. Nisi officiis expedita ducimus iusto soluta quia incidunt corporis? Eius dignissimos facilis exercitationem, dolores distinctio incidunt iste repellendus atque necessitatibus qui saepe.
Lorem ipsum dolor sit amet consectetur adipisicing elit. Quia iste laboriosam quo dolorum accusamus possimus labore doloremque quod mollitia autem fuga aut, eius voluptatem error unde tenetur, provident, architecto dolorem?
  </div>
  
  
  

</div>


  <button type="submit" id="btn-submit" class="btn btn-primary"style="margin-left:10px; margin-top:-100px;background:   linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(180deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%), #7C3A3A;width: 95px;
height: 32px;
" >

 <div class="" style="font-family: Rasa; font-size: 16px;margin-top:-11px;  margin-left:-9px;color: #000000;
" >deconnexion</div></button>
</div>
<div id="">
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#staticBackdrop">
  Launch static backdrop modal
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       <form id="reps" method="post"></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script>
$("#reps").submit(function(e){
  
  e.preventDefault()
  $.ajax({
    type:"post",
    url:"mo.php",
    data:$(this).serialize(),
    success:function(data){
      
    }
  })
})
function update(e){
var f=e.getAttribute('id')
alert(f)
$.ajax({
  type:'post',
  url:"modifierquestions.php",
  data:{id:f},
  success:function(data){
    $('#reps').html('')
    $("#reps").append(data)
    console.log(data)
  }


})
}
function deleteQues(e){
  var f=e.getAttribute('id')
  alert(f)
}
//let offset = 2;
//const scrollZone = $('#scrollZone')
       // scrollZone.scroll(function fd(){
       // alert(scrollZone[0].clientHeight)
        //const st = scrollZone[0].scrollTop;
       // const sh = scrollZone[0].scrollHeight;
//         const ch = scrollZone[0].clientHeight;
// $.ajax({
//   type: "POST",
//        url: "traitementlisteQuestion.php",
//       data: {limit:2,offset:0},
//       dataType: "JSON",
//       success:function(data){

//       }
// })
// })
let offset = 0;
$(document).ready(function(){

//const date = $('#date').val();

//const tbody = $('#tbody');
$.ajax({
        type: "POST",
        url: "traitementlisteQuestion.php",
        data: {limit:2,offset:offset},
        dataType: "JSON",
        success: function (data) {
          //  tbody.html('')
          
            offset +=2
        }
    });

    //  Scroll

});
const scrollZone = $('#scrollZone')
scrollZone.scroll(function(){
//console.log(scrollZone[0].clientHeight)
const st = scrollZone[0].scrollTop;
const sh = scrollZone[0].scrollHeight;
const ch = scrollZone[0].clientHeight;

console.log(st,sh, ch);

if(sh-st <= ch){
    $.ajax({
        type: "POST",
        url: "traitementlisteQuestion.php",
        data: {limit:2,offset:offset},
        dataType: "JSON",
        success: function (data) {
            alert(data)
          for (let i = 0; i < data.length; i++) {
         
            if(data[i].choix=='multiple'){
              console.log(data[i])
              alert('multiple')
              var div=document.createElement('label')
              var h=document.createElement('label')
              var sup=document.createElement('button')
              sup.setAttribute("id",data[i].id)
              sup.setAttribute("class","btn btn-success")
              sup.setAttribute("onclick","deleteQues(this)")
              sup.innerText='Supprimer'
              var mode=document.createElement('button')
              mode.setAttribute("id",data[i].id)
              mode.setAttribute("data-toggle","modal")
              mode.setAttribute("data-target","#staticBackdrop")
              mode.setAttribute("class","btn btn-danger")
              mode.setAttribute("onclick","update(this)")
              mode.innerText='Modifier'
              h.innerText=data[i].intitule



              div.append(h)
              div.append(mode)
              div.append(sup)

              


















           for (let o = 0; o < data[i].reponses.length; o++) {
             
             var bool=false
           //  alert(data[i].goods)
             for (let y = 0; y < data[i].goods.length; y++) {
            //   alert("oyu"+o+1+"fghj"+data[i].goods[y].good)
               if(o+1==data[i].goods[y].bonnereponse){
              //  alert('ok')
                bool=true
                }

               
             }
             if(bool==true){
            //  alert('ok')
                var dive=document.createElement('div')
                var lble=document.createElement('label')
                var inpte=document.createElement('input')
                inpte.setAttribute('type','checkbox')
                inpte.setAttribute('checked','')
                inpte.setAttribute('disabled','')

             // alert(data[i].reponses[o].reponse)
                lble.innerHTML=data[i].reponses[o].reponse
                dive.append(inpte)
              dive.append(lble)
              div.append(dive)
             }else{
            //  alert('ok')
              var dive=document.createElement('div')
                var lble=document.createElement('label')
                var inpte=document.createElement('input')
                inpte.setAttribute('type','checkbox')
                inpte.setAttribute('disabled','')


                lble.innerHTML=data[i].reponses[o].reponse
                dive.append(inpte)
              dive.append(lble)
              var btp=document.createElement('button')
              btp.setAttribute('click','paginatebackQues()')
              btp.setAttribute('type','button')
              btp.innerText="Precedent"
              var bts=document.createElement('button')
              bts.setAttribute('click','paginateQues()')
              bts.setAttribute('type','button')
              bts.innerText="Suivant"

              div.append(dive)
              

             }
             
           }

              
              $("#scrollZone").append(div)
              
            }

            if(data[i].choix=='text'){
              var div=document.createElement('label')
              var h=document.createElement('label')
              var sup=document.createElement('button')
              sup.setAttribute("id",data[i].id)
              sup.setAttribute("class","btn btn-success")
              sup.setAttribute("onclick","deleteQues(this)")
              sup.innerText='Supprimer'
              var mode=document.createElement('button')
              mode.setAttribute("id",data[i].id)
              mode.setAttribute("class","btn btn-danger")
              mode.setAttribute("onclick","update(this)")
              mode.setAttribute("data-toggle","modal")
              mode.setAttribute("data-target","#staticBackdrop")
              mode.innerText='Modifier'
              h.innerText=data[i].intitule



              div.append(h)
              div.append(mode)
              div.append(sup)
              var texte=document.createElement('input')
              texte.setAttribute('type','text')
              texte.setAttribute('readonly','')
              texte.setAttribute('class','form-control')
              texte.setAttribute('value',data[i].reponse)
              div.append(texte)
              $("#scrollZone").append(div)
            }
            if(data[i].choix=='simple'){
              var div=document.createElement('label')
              var h=document.createElement('label')
              var sup=document.createElement('button')
              sup.setAttribute("id",data[i].id)
              sup.setAttribute("class","btn btn-success")
              sup.setAttribute("onclick","deleteQues(this)")
              sup.innerText='Supprimer'
              var mode=document.createElement('button')
              mode.setAttribute("id",data[i].id)
              mode.setAttribute("class","btn btn-danger")
              mode.setAttribute("onclick","update(this)")
              mode.setAttribute("data-toggle","modal")
              mode.setAttribute("data-target","#staticBackdrop")
              mode.innerText='Modifier'
              h.innerText=data[i].intitule



              div.append(h)
              div.append(mode)
              div.append(sup)
              for(let p=0;p<data[i].reponse.length;p++){
     
     if(p+1==data[i].good){
       var divs=document.createElement('div')
       var labels=document.createElement('label')
     labels.innerHTML=data[i].reponse[p].reponse
       var cbxs=document.createElement('input')
       cbxs.setAttribute('type','radio')
       cbxs.setAttribute('checked','')
       cbxs.setAttribute('disabled','')

       divs.append(cbxs)
       divs.append(labels)
       div.append(divs)

     }else{
       var divs=document.createElement('div')
       var labels=document.createElement('label')
     labels.innerHTML=data[i].reponse[p].reponse
       var cbxs=document.createElement('input')
       cbxs.setAttribute('type','radio')
       cbxs.setAttribute('disabled','')

       divs.append(cbxs)
       divs.append(labels)
       div.append(divs)
     }
     }  $("#scrollZone").append(div)

            }
            
          }
            offset +=2;
        }
    });
}
   
})
</script>
  </body>
</html>

